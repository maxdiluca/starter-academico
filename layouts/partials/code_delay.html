<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="Generator" content="iWeb 3.0.4" />
    <meta name="iWeb-Build" content="local-build-20151006" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta name="viewport" content="width=900" />
    <title>MEASURE OF VR DELAY measure of latency
measure of lag
measure of delay</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="code_delay_files/code_delay.css" />
    <!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='code_delay_files/code_delayIE.css'/><![endif]-->
    <!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='Media/IE8.css'/><![endif]-->
    <style type="text/css">
/*<![CDATA[*/
	@import "Scripts/Widgets/HTMLRegion/Paste.css";
/*]]>*/
</style>
    <script type="text/javascript" src="Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="Scripts/iWebImage.js"></script>
    <script type="text/javascript" src="Scripts/iWebMediaGrid.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/HTMLRegion/Paste.js"></script>
    <script type="text/javascript" src="code_delay_files/code_delay.js"></script>
  </head>
  <body style="background: rgb(255, 255, 255); margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 10px; margin-left: auto; margin-right: auto; margin-top: 10px; overflow: hidden; position: relative; word-wrap: break-word;  background: rgb(255, 255, 255); text-align: left; width: 900px; " id="body_content">
        <div style="margin-left: 0px; position: relative; width: 900px; z-index: 0; " id="nav_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id1" style="height: 200px; left: 10px; position: absolute; top: 10px; width: 880px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content style_External_880_200" style="padding: 0px; ">
              <div class="style"></div>
            </div>
          </div>
          


          <div id="id2" style="height: 60px; left: 16px; position: absolute; top: 106px; width: 850px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content style_External_850_60 vertical-align-middle-middlebox" style="padding: 0px; ">
              <div class="style_1 vertical-align-middle-innerbox">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style"><span class="style_2">massimiliano</span>diluca</p>
              </div>
            </div>
          </div>
          <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
          <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 10px; margin-top: 164px; opacity: 1.00; position: relative; width: 860px; z-index: 1; ">
    
            <div id="widget0-navbar" class="navbar">

      
              <div id="widget0-bg" class="navbar-bg">

        
                <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                
      
</div>
              
    
</div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', 'Scripts/Widgets/Navbar', 'Scripts/Widgets/SharedResources', '.', {"path-to-root": "", "navbar-css": ".navbar {\n\tfont-family: 'Helvetica Neue', Arial, sans-serif;\n\tfont-size: .8em;\n\tcolor: #666666;\n\tline-height: 30px;\n\tborder-bottom: 3px solid #ccc;\n}\n\n.navbar-bg {\n\ttext-align: right;}\n\n.navbar-bg ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n\nli {\n\tlist-style-type: none;\n\tdisplay: inline;\n\tpadding: 0px 5px 0px 0px;\n}\n\n\nli a {\n\ttext-decoration: none;\n\tpadding: 10px;\n\tcolor: #666666;\n\tfont-weight: bold;\n}\n\nli a:visited {\n\ttext-decoration: none;\n\tpadding: 10px;\n\tcolor: #666666;\n\tfont-weight: bold;\n}\n\nli a:hover\r{\r\n \tcolor: #999999;\n\ttext-decoration: none;\r}\n\n\nli.current-page a\r{\r\t color: #66ABC5;\n\ttext-decoration: none;\r}\n", "current-page-GUID": "89FC178C-2E29-475B-81F4-29721912EC4B", "isCollectionPage": "NO"});
//--><!]]></script>
          <div style="height: 200px; width: 3px;  height: 200px; left: 30px; position: absolute; top: 10px; width: 1px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 1px; ">
              <img src="code_delay_files/shapeimage_1.jpg" alt="" style="height: 200px; left: 0px; margin-left: -1px; position: absolute; top: 0px; width: 3px; " />
            </div>
          </div>
          


          <div style="height: 200px; width: 3px;  height: 200px; left: 68px; position: absolute; top: 10px; width: 1px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 1px; ">
              <img src="code_delay_files/shapeimage_2.jpg" alt="" style="height: 200px; left: 0px; margin-left: -1px; position: absolute; top: 0px; width: 3px; " />
            </div>
          </div>
          


          <div style="height: 200px; width: 3px;  height: 200px; left: 138px; position: absolute; top: 10px; width: 1px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 1px; ">
              <img src="code_delay_files/shapeimage_3.jpg" alt="" style="height: 200px; left: 0px; margin-left: -1px; position: absolute; top: 0px; width: 3px; " />
            </div>
          </div>
          


          <div style="height: 200px; width: 3px;  height: 200px; left: 250px; position: absolute; top: 10px; width: 1px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 1px; ">
              <img src="code_delay_files/shapeimage_4.jpg" alt="" style="height: 200px; left: 0px; margin-left: -1px; position: absolute; top: 0px; width: 3px; " />
            </div>
          </div>
          


          <div style="height: 200px; width: 3px;  height: 200px; left: 15px; position: absolute; top: 10px; width: 1px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 1px; ">
              <img src="code_delay_files/shapeimage_5.jpg" alt="" style="height: 200px; left: 0px; margin-left: -1px; position: absolute; top: 0px; width: 3px; " />
            </div>
          </div>
          <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="height: 225px; margin-left: 0px; position: relative; width: 900px; z-index: 10; " id="header_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id3" style="height: 187px; left: 480px; position: absolute; top: 38px; width: 400px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content style_External_400_187 vertical-align-middle-middlebox" style="padding: 0px; ">
              <div class="style_1 vertical-align-middle-innerbox">
                <p style="padding-top: 0pt; " class="paragraph_style_1"><span class="style_3">MEASURE OF VR DELAY </span><span style="line-height: 15px; " class="style_4">measure of latency<br /></span></p>
                <p class="paragraph_style_2"><span style="line-height: 15px; " class="style_5">measure of lag<br /></span></p>
                <p style="padding-bottom: 0pt; " class="paragraph_style_2"><span style="line-height: 15px; " class="style_5">measure of delay</span></p>
              </div>
            </div>
          </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 900px; z-index: 5; " id="body_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id4" style="height: 2269px; left: 10px; position: absolute; top: 13px; width: 880px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content Normal_External_880_2269" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-top: 0pt; " class="paragraph_style_3">On this page you can find the Matlab source code described in the manuscript &quot;New method to measure end-to-end delay of Virtual Reality&quot; by Massimiliano Di Luca published in <a title="http://www.mitpressjournals.org/loi/pres" href="http://www.mitpressjournals.org/loi/pres">Presence: Teleoperators &amp; Virtual Environments</a>. <br /></p>
                <p class="paragraph_style_3">The manuscript can be downloaded <a title="publications.html" href="publications.html">HERE</a>. I recommend reading it, as the software is not self-explanatory. <br /></p>
                <p class="paragraph_style_3">The code allows the implementation of the method which uses two photodiodes and two gradients (one real shown on a flat panel display, one virtual). The two photodiodes capture the light produced by the gradient on the flat panel display and by the virtual gradient. The signal is thus proportional to the position along the gradient. By plugging the two photodiodes into the audio card, it is possible to record virtual and physical trajectories without additional materials than a computer. The method allows to perform multiple recordings and vary, for example, the movement frequency in order to determine whether the end-to-end delay of the VR system is constant. Other parameters can also be varied to test if the delay changes (movement direction, amplitude of movement, location). The advantages of this method are the simplicity of the measurement and the similarity of the setups required for measurement and for final utilization of the VR system. In the paper I consider different types of VR system where the arrangement required for the measurement changes accordingly, for example:<br /></p>
                <ol>
                  <li style="line-height: 33px; padding-left: 40px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 18px; position: relative; top: 0px; " class="Bullet">•</span><span style="width: 11px; " class="inline-block"></span>With VR system having an HMD display, the recordings require to perform repetitive movements of the HMD with attached a photodiode. Movements are performed in front of the flat-panel display. In the VR scene the second gradient is displayed (which position is fixed with respect to the VR environment). The second photodiode points at the display of the HMD. <br /></p>
                  </li>
                  <li style="line-height: 33px; padding-left: 40px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 18px; position: relative; top: 0px; " class="Bullet">•</span><span style="width: 11px; " class="inline-block"></span>With VR system having a fixed screen, the recordings are preformed by moving a tracker (with attached a photodiode) in front of the flat-panel display. A second diode captures the luminance generated by the gradient in the VR scene (which position is updated according to the position of the tracker). <br /></p>
                  </li>
                </ol>
                <p class="paragraph_style_3">The analysis script included in the archive allows the estimate of the frequency of movements and of the delay for each of the recordings. <br /><br /></p>
                <p class="paragraph_style_3">Content of the archive: <br /></p>
                <ol>
                  <li style="line-height: 33px; padding-left: 40px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 18px; position: relative; top: 0px; " class="Bullet">•</span><span style="width: 11px; " class="inline-block"></span>test_{1/2}_{1/2/3/4}.mat <br /></p>
                  </li>
                </ol>
                <p class="paragraph_style_3">                set of example recordings <br /></p>
                <ol>
                  <li style="line-height: 33px; padding-left: 40px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 18px; position: relative; top: 0px; " class="Bullet">•</span><span style="width: 11px; " class="inline-block"></span>test_recording.m <br /></p>
                  </li>
                </ol>
                <p class="paragraph_style_3">                allows to check whether the diodes are connected correctly and the audiocard has a stereo line-in input <br /></p>
                <ol>
                  <li style="line-height: 33px; padding-left: 40px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 18px; position: relative; top: 0px; " class="Bullet">•</span><span style="width: 11px; " class="inline-block"></span>signal_recording.m <br /></p>
                  </li>
                </ol>
                <p class="paragraph_style_3">                can be used to record the signals generated by one movement <br /></p>
                <ol>
                  <li style="line-height: 33px; padding-left: 40px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 18px; position: relative; top: 0px; " class="Bullet">•</span><span style="width: 11px; " class="inline-block"></span>calculate_delay_gui.m <br /></p>
                  </li>
                </ol>
                <p class="paragraph_style_3">                loads a series of recordings and determines the relative delay and largest frequency component of the movement <br /></p>
                <p class="paragraph_style_3"><br /></p>
                <ol>
                  <li style="line-height: 33px; padding-left: 40px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-size: 18px; position: relative; top: 0px; " class="Bullet">-</span><span style="width: 13px; " class="inline-block"></span>myfilteronefreq.m <br /></p>
                  </li>
                  <li style="line-height: 33px; padding-left: 40px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-size: 18px; position: relative; top: 0px; " class="Bullet">-</span><span style="width: 13px; " class="inline-block"></span>finddelay.m <br /></p>
                  </li>
                  <li style="line-height: 33px; padding-left: 40px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-size: 18px; position: relative; top: 0px; " class="Bullet">-</span><span style="width: 13px; " class="inline-block"></span>fsplot.m <br /></p>
                  </li>
                  <li style="line-height: 33px; padding-left: 40px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-size: 18px; position: relative; top: 0px; " class="Bullet">-</span><span style="width: 13px; " class="inline-block"></span>findfreq.m <br /></p>
                  </li>
                </ol>
                <p class="paragraph_style_3">                files required by calculate_delay_gui.m <br /><br /></p>
                <p class="paragraph_style_3"><br /></p>
                <p class="paragraph_style_3">Copyright (c) 2010, Massimiliano Di Luca <br /></p>
                <p class="paragraph_style_3">Permission is hereby granted, free of charge, to any person obtaining a copy of this software, the data files, and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: <br /></p>
                <p class="paragraph_style_3">The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. <br /></p>
                <p class="paragraph_style_3">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. <br /></p>
                <p style="padding-bottom: 0pt; " class="paragraph_style_6"><br /><a class="class1" title="code_delay_files/delay_measurement_0_3.zip" href="code_delay_files/delay_measurement_0_3.zip">I accept the terms</a></p>
              </div>
            </div>
          </div>
          <div class="com-apple-iweb-widget-HTMLRegion" id="widget1" style="height: 36px; left: 108px; opacity: 1.00; position: absolute; top: 2305px; width: 696px; z-index: 1; ">
            <script type="text/javascript"><!--//--><![CDATA[//><!--
    var widget1_htmlMarkupURL = ".//code_delay_files/widget1_markup.html";
//--><!]]></script>
            <div id="widget1-htmlRegion" class="html_region_widget"></div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new Paste('widget1', 'Scripts/Widgets/HTMLRegion', 'Scripts/Widgets/SharedResources', '.', {"emptyLook": false});
//--><!]]></script>
          <div style="height: 2341px; line-height: 2341px; " class="spacer"> </div>
        </div>
        <div style="height: 75px; margin-left: 0px; position: relative; width: 900px; z-index: 15; " id="footer_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div class="com-apple-iweb-widget-HTMLRegion" id="widget2" style="height: 21px; left: 295px; opacity: 1.00; position: absolute; top: 54px; width: 299px; z-index: 1; ">
            <script type="text/javascript"><!--//--><![CDATA[//><!--
    var widget2_htmlMarkupURL = ".//code_delay_files/widget2_markup.html";
//--><!]]></script>
            <div id="widget2-htmlRegion" class="html_region_widget"></div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new Paste('widget2', 'Scripts/Widgets/HTMLRegion', 'Scripts/Widgets/SharedResources', '.', {"emptyLook": false});
//--><!]]></script>
        </div>
      </div>
    </div>
  </body>
</html>


